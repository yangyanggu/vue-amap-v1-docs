import{_ as g,f as w,r as E,o as _,c as b,a as h,b as f,w as T,t as C,F as H}from"./app.73ff0094.js";var t,u,l,d=[],c=[],p=null;const R=w({data(){return{zoom:14,center:[116.54,39.79],visible:!0,map:null,timer:null}},beforeUnmount(){cancelAnimationFrame(this.timer),t=null,u=null,l=null,d=null,c=null,p=null},methods:{switchVisible(){this.visible=!this.visible},initMap(e){this.map=e,p=e.customCoords,c=p.lngLatsToCoords([[116.52,39.79],[116.54,39.79],[116.56,39.79]]);const a=this;function o(){for(let n=0;n<d.length;n++){let{mesh:i,count:r}=d[n];r+=1,i.rotateZ(r/180*Math.PI)}e.render(),a.timer=requestAnimationFrame(o)}o()},initGL(e){t=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,100,1<<30),u=new THREE.WebGLRenderer({context:e}),u.autoClear=!1,l=new THREE.Scene;var a=new THREE.AmbientLight(16777215,.3),o=new THREE.DirectionalLight(16777215,1);o.position.set(1e3,-100,900),l.add(o),l.add(a);var n=new THREE.TextureLoader().load("https://a.amap.com/jsapi_demos/static/demo-center-v2/three.jpeg");n.minFilter=THREE.LinearFilter;var i=new THREE.MeshPhongMaterial({color:16773360,depthTest:!0,transparent:!0,map:n}),r=new THREE.BoxBufferGeometry(1e3,1e3,1e3);for(let s=0;s<c.length;s++){const v=c[s];var m=new THREE.Mesh(r,i);m.position.set(v[0],v[1],0),d.push({mesh:m,count:s}),l.add(m)}},render(){u.state.reset();var{near:e,far:a,fov:o,up:n,lookAt:i,position:r}=p.getCameraParams();t.near=e,t.far=a,t.fov=o,t.position.set(...r),t.up.set(...n),t.lookAt(...i),t.updateProjectionMatrix(),u.render(l,t)}}}),L={class:"map-page-container"},F={class:"toolbar"};function M(e,a,o,n,i,r){const m=E("el-amap-layer-gl-custom"),s=E("el-amap");return _(),b(H,null,[h("div",L,[f(s,{center:e.center,zoom:e.zoom,"view-mode":"3D",pitch:50,onInit:e.initMap},{default:T(()=>[f(m,{visible:e.visible,init:e.initGL,render:e.render},null,8,["visible","init","render"])]),_:1},8,["center","zoom","onInit"])]),h("div",F,[h("button",{onClick:a[0]||(a[0]=v=>e.switchVisible())},C(e.visible?"\u9690\u85CF":"\u663E\u793A"),1)])],64)}var k=g(R,[["render",M],["__file","gl-custom.vue"]]);export{k as default};
